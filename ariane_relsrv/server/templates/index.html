<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ArianeUI</title>
    <link rel="stylesheet" type="text/css" href="../static/style/index.css">
</head>
<body ng-app="ArianeUI">
<div class="mainBody">
    <!-- ****************************************************** COLUMN DISTRIBUTION ****************************************************** -->
    <div class="colBase" ng-controller="DisplayColBaseCtrl">
        <div class="colHeader">
            <span>Distribution
                <button class="btnRelease" ng-if="page=='edition'" ng-disabled="!enableEdit || activeEdit" ng-click="clickReleaseMod()">Release</button>
                <button class="btnRelease" ng-if="page=='releaseA'" ng-disabled="!enableEdit || activeEdit" ng-click="clickEditionMod()">Edition</button>
            </span>
        </div>
        <div class="colBody">
            <span class="listRoot">Distributions
                <button class="btnExtend" ng-click="toggleDistList()">+/-</button>
                <span ng-if="page=='edition'">
                    <button class="btnRelease" ng-click="toggleResetDB()">RESET</button>
                    <span ng-show="confirmValRoll.active">Reset Database ? <button ng-click="clickResetDB('YES')">YES</button> <button ng-click="clickResetDB('NO')">NO</button></span>
                </span>
            </span>
            <div class="DistList" ng-show="isDistToggle()">
            <ul ng-repeat="dist in dists">
                {% raw %}
                <li ng-class="dist.selected ? 'DistSelected' : 'DistNotSelected'" ng-click="clickDist(dist)"><label>{{ dist.version }}</label></li>
                {% endraw %}
            </ul>
            </div>
            <!-- ************************ INCLUDED TEMPLATE  ************************ -->
            <div ng-include="baseTemplate.url"></div>
        </div>
    </div>
    <!-- ****************************************************** COLUMN COMPOSITION ******************************************************-->
    <div class="colNodes">
        <div class="colHeader">
            <span>Composition</span>
        </div>
        <div class="colBody" ng-controller="DisplayColNodesCtrl">
        <span class="listRoot">Components <!-- ****************** Components ****************** -->
            <button class="btnExtend" ng-click="toggleModList()">+/-</button>
            <button class="btnAddDel" ng-if="page=='edition' && !isPlugin && enableEdit" ng-disabled="activeEdit" ng-click="addElement('module')">Add</button>
        </span>
        <div class="ModList" ng-show="isModToggle()">
            <ul ng-repeat="module in modules">
                {% raw %}
                <li ng-class="module.selected ? 'ModSelected' : 'ModNotSelected'">
                    <span>
                        <label ng-click="clickMod(module)">{{ module.name }} {{module.version}}</label><span ng-if="module.order"> ({{ module.order }})</span>
                        <span ng-if="page=='edition' && module.selected && enableEdit">
                            <!--<button class="btnAddDel" ng-click="addElement('submodule')">Add</button>-->
                            <button class="btnAddDel" ng-disabled="activeEdit" ng-click="delElement(module)">Delete</button>
                        </span>
                    </span>
                {% endraw %}
                </li>
            </ul>
        </div>
        <hr class="separateur"> <!-- ****************** Modules ****************** -->
            {% raw %}
        <div class="listRoot">Modules
            (<span ng-if="subSet.parent">{{subSet.parent.name}}</span>)
            <button class="btnExtend" ng-click="toggleSubList()">+/-</button>
            <button class="btnAddDel" ng-if="page=='edition' && subSet.parent && enableEdit" ng-disabled="activeEdit" ng-click="addElement('submodule', subSet.parent)">Add</button>
        </div>
            {% endraw %}
        <div class="SubList" ng-show="isSubToggle()">
            <ul ng-repeat="submodule in subSet.modules">
                {% raw %}
                <li>
                    <span>
                        <label ng-class="submodule.selected ? 'SubSelected' : 'SubNotSelected'" ng-click="clickSub(submodule)">{{ submodule.name }} ({{ submodule.order }})</label>
                        <button class="btnExtend" ng-if="submodule.issubparent" ng-click="toggleModSub(submodule)">+/-</button>
                        <span ng-if="page=='edition' && submodule.issubparent && submodule.selected && enableEdit">
                            <button class="btnAddDel" ng-disabled="activeEdit" ng-click="addElement('submodule', submodule)">Add</button>
                        </span>
                        <button class="btnAddDel" ng-if="page=='edition' && submodule.selected && enableEdit" ng-disabled="activeEdit" ng-click="delElement(submodule)">Delete</button>
                    </span>
                        <div class="ModSubList" ng-if="submodule.issubparent" ng-show="isModSubToggle(submodule)">
                            <ul ng-repeat="sub in submodule.sublist" ng-include="'field_renderer.html'">
                            </ul>
                        </div>
                </li>
                {% endraw %}
            </ul>
        </div>
            <!--<hr class="separateur">      ****************** Files ****************** -->
        <div class="listRoot">Files
            {% raw %}
            (<span ng-if="fileSet.parent">{{fileSet.parent.name | prefix:'Distrib_':fileSet.parent:'node_type':'distrib' | sufix:'version':fileSet.parent:'node_type':'distrib'}}</span>)
            {% endraw %}
            <button class="btnExtend" ng-disabled="0" ng-click="toggleFileList()">+/-</button>
            <button class="btnAddDel" ng-if="page=='edition' && fileSet.parent && enableEdit" ng-disabled="activeEdit" ng-click="addElement('filenode')">Add</button>
        </div>
        <div class="FileList" ng-show="isFileToggle()">
            <ul ng-repeat="filenode in fileSet.filenodes">
            {% raw %}
                <li ng-class="filenode.selected ? 'FileSelected' : 'FileNotSelected'" ng-click="clickFile(filenode)">{{ filenode.name | limitDisplay : limitLetterNum }}
                    <button class="btnAddDel" ng-if="page=='edition' && filenode.selected && enableEdit" ng-disabled="activeEdit" ng-click="delElement(filenode)">Delete</button>
                </li>
            {% endraw %}
            </ul>
        </div>
        </div>
    </div>
    <!-- ****************************************************** COLUMN EDITION ******************************************************-->
    <div class="colEdit" ng-controller="EditCtrl">
        <div ng-include="editionTemplate.url"></div>
    </div>
</div>
<!--<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.4/angular.min.js"></script>-->
<script type="text/javascript" src="../static/js/lib/jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="../static/js/lib/angular.min.js"></script>
<script type="text/javascript" src="../static/js/app.js"></script>
<script type="text/javascript" src="../static/js/services/ajax.js"></script>
<script type="text/javascript" src="../static/js/services/ui.js"></script>
<script type="text/javascript" src="../static/js/filters/filters.js"></script>
<script type="text/javascript" src="../static/js/controllers/DisplayColBase.js"></script>
<script type="text/javascript" src="../static/js/controllers/DisplayColNodes.js"></script>
<script type="text/javascript" src="../static/js/controllers/Edit.js"></script>
<script type="text/ng-template" id="field_renderer.html">
    {% raw %}
    <li>
        <span>
            <label ng-class="sub.selected ? 'SubSelected' : 'SubdNotSelected'" ng-click="clickSub(sub)">{{ sub.name }} ({{ sub.order }})</label>
            <button class="btnExtend" ng-if="sub.issubparent" ng-click="toggleModSub(sub)">+/-</button>
            <span ng-if="page=='edition' && sub.issubparent && sub.selected && enableEdit"><button class="btnAddDel" ng-disabled="activeEdit" ng-click="addElement('submodule', sub)">Add</button></span>
            <button class="btnAddDel" ng-if="page=='edition' && sub.selected && enableEdit" ng-disabled="activeEdit" ng-click="delElement(sub)">Delete</button>
        </span>
        <div class="ModSubList" ng-if="sub.issubparent" ng-show="isModSubToggle(sub)">
            <ul ng-repeat="sub in sub.sublist">
                <div ng-include="'field_renderer.html'"></div>
            </ul>
        </div>
    </li>
    {% endraw %}
</script>
</body>
</html>